(function(){let e=[],t=null,n=(e,t)=>Math.random()*(t-e)+e;function r(e){let t={x:n(-50,50),y:n(0,10),z:n(-50,50)};return{id:e,position:{...t},dimensions:{w:n(1,5),h:n(1,5),l:n(1,5)},rotationY:n(0,Math.PI*2),trajectory:[t],step:0,velocity:{x:n(-.1,.1),y:n(-.05,.05),z:n(-.1,.1)},initialPosition:t}}function i(e){if(e.step>=99)return r(e.id);let t={x:e.position.x+e.velocity.x,y:e.position.y+e.velocity.y,z:e.position.z+e.velocity.z};return{...e,position:t,rotationY:e.rotationY+.01,step:e.step+1}}function a(){if(e.length===0)return;e=e.map(i);let t={type:`frame`,boxes:e};postMessage(t)}self.onmessage=n=>{let{type:i}=n.data;if(i===`start`){let{n:i,fps:o}=n.data;t&&clearInterval(t),console.log(`[Worker] 시뮬레이션 시작. N=${i}, FPS=${o}`),e=Array.from({length:i},(e,t)=>r(t));let s=1e3/o;t=setInterval(a,s)}else i===`stop`&&(console.log(`[Worker] 시뮬레이션 중지.`),t&&=(clearInterval(t),null),e=[])}})();